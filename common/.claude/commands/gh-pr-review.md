# gh-pr-review

Post a comprehensive AI-assisted code review as a GitHub PR comment

## Usage

Use this command when you want to perform a thorough code review and post it as a comment on a GitHub Pull Request. The review will be posted under your GitHub username with clear attribution to Claude AI.

## Steps

1. **Identify the PR**:
   - Accept PR number, URL, or use current branch's PR
   - If no PR specified, list available PRs:
   ```bash
   gh pr list
   ```

2. **Gather Project Documentation**:
   - Check for and read all project documentation:
   ```bash
   # Look for documentation files
   ls -la README* CONTRIBUTING* CLAUDE* .github/ docs/ 2>/dev/null
   ```
   - Read and understand:
     - Coding standards and conventions
     - Architecture patterns
     - Testing requirements
     - Commit message formats
     - Any project-specific guidelines

3. **Fetch PR Details**:
   ```bash
   # Get PR information
   gh pr view <PR_NUMBER> --json title,body,commits,files
   
   # Get list of changed files
   gh pr diff <PR_NUMBER> --name-only
   
   # View the full diff
   gh pr diff <PR_NUMBER>
   ```

4. **Analyze Changes**:
   - Review all commits in the PR
   - Check each modified file against project guidelines
   - Evaluate code quality, security, and performance
   - Verify adherence to documented standards
   - Test coverage and edge cases

5. **Generate Structured Review**:

   Structure the review with clear priority levels:

   ### =4 CRITICAL ISSUES (Must Fix)
   - Security vulnerabilities
   - Breaking changes
   - License violations
   - Violations of documented standards
   - Include specific code examples and fixes

   ### =á WARNINGS (Should Fix)
   - Performance concerns
   - Missing error handling
   - Code maintainability issues
   - Deviations from project conventions
   - Include suggestions with code snippets

   ### =â SUGGESTIONS (Consider)
   - Style improvements
   - Refactoring opportunities
   - Documentation enhancements
   - Alternative approaches

6. **Post Review Comment**:
   ```bash
   # Post the review as a PR comment
   gh pr comment <PR_NUMBER> --body "$(cat <<'EOF'
   ## > AI-Assisted Code Review by Claude
   
   I've performed a comprehensive review of this PR based on the project's documentation and coding standards.
   
   ### =Ë Documentation Compliance
   [Status of adherence to project guidelines]
   
   ### =4 Critical Issues
   [List critical issues if any]
   
   ### =á Warnings
   [List warnings if any]
   
   ### =â Suggestions
   [List suggestions if any]
   
   ###  Good Practices Observed
   [Acknowledge good code/patterns]
   
   ### =Ê Overall Assessment
   [Ready to merge / Needs work / Requires discussion]
   
   ---
   *This review was generated by Claude AI and posted on behalf of @$(gh api user --jq .login). Please verify critical findings independently.*
   EOF
   )"
   ```

## Review Focus Areas

### Project Compliance (HIGHEST PRIORITY)
- Documented coding standards
- Naming conventions
- File organization
- Architecture patterns
- Testing requirements

### Code Quality
- Readability and maintainability
- DRY principle
- Clear naming
- Proper abstractions

### Security & Safety
- Input validation
- Error handling
- No exposed secrets
- SQL injection prevention
- XSS protection

### Performance
- Algorithm efficiency
- Memory usage
- Database queries
- Caching strategies

### Testing
- Test coverage
- Edge cases
- Integration tests
- Documentation

## Important Notes

- **Always check project documentation first** before applying generic best practices
- **Project conventions override common practices** when they conflict
- **Be specific** - provide code examples for every issue
- **Be constructive** - focus on the code, not the person
- **Acknowledge good work** - highlight clever solutions and good practices
- **Clear attribution** - always indicate this is an AI-assisted review

## Example Usage

```bash
# Review current branch's PR
/gh-pr-review

# Review specific PR number
/gh-pr-review 123

# Review PR from URL
/gh-pr-review https://github.com/org/repo/pull/123
```

## Tips

- Read CONTRIBUTING.md and similar docs thoroughly before reviewing
- Check previous PR reviews in the repo for style consistency
- When unsure about project conventions, ask for clarification
- Consider the PR's context and purpose, not just the code
- Be respectful and professional in all feedback
- Test commands locally when suggesting fixes