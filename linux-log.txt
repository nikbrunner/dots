[nbr@carbon dots]$ ./install.sh
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘    Dots Complete Machine Setup       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Detected OS: linux

ðŸ“‹ Phase 1: Dependency Installation
ðŸ” Detecting operating system... arch
ðŸ“¦ Using package manager: paru

ðŸ“‹ Checking required dependencies...

Required dependencies:
  âœ… git - already installed
  âŒ zsh - missing
  âœ… tmux - already installed
  âŒ neovim - missing
  âœ… fzf - already installed
  âŒ ripgrep - missing
  âœ… fd - already installed
  âŒ bat - missing
  âŒ delta - missing
  âŒ lazygit - missing
  âŒ eza - missing
  âœ… zoxide - already installed
  âŒ gum - missing
  âœ… gh - already installed
  âœ… 1password - already installed
  âŒ 1password-cli - missing

ðŸš€ Installing dependencies...
ðŸ“¦ Installing zsh...
[sudo] password for nbr: 
resolving dependencies...
looking for conflicting packages...

Package (1)  New Version  Net Change  Download Size

extra/zsh    5.9-5          6,56 MiB       2,22 MiB

Total Download Size:   2,22 MiB
Total Installed Size:  6,56 MiB

:: Proceed with installation? [Y/n] 
:: Retrieving packages...
 zsh-5.9-5-x86_64                                                                           2,2 MiB  3,24 MiB/s 00:01 [----------------------------------------------------------------------] 100%
(1/1) checking keys in keyring                                                                                        [----------------------------------------------------------------------] 100%
(1/1) checking package integrity                                                                                      [----------------------------------------------------------------------] 100%
(1/1) loading package files                                                                                           [----------------------------------------------------------------------] 100%
(1/1) checking for file conflicts                                                                                     [----------------------------------------------------------------------] 100%
:: Processing package changes...
(1/1) installing zsh                                                                                                  [----------------------------------------------------------------------] 100%
:: Running post-transaction hooks...
(1/1) Arming ConditionNeedsUpdate...
ðŸ“¦ Installing neovim...
warning: neovim-0.11.2-3 is up to date -- skipping
 there is nothing to do
ðŸ“¦ Installing ripgrep...
warning: ripgrep-14.1.1-1 is up to date -- skipping
 there is nothing to do
ðŸ“¦ Installing bat...
resolving dependencies...
looking for conflicting packages...

Package (3)    New Version  Net Change  Download Size

extra/libgit2  1:1.9.1-1      3,04 MiB       0,95 MiB
extra/llhttp   9.2.1-2        0,10 MiB       0,03 MiB
extra/bat      0.25.0-4       5,34 MiB       2,33 MiB

Total Download Size:   3,31 MiB
Total Installed Size:  8,48 MiB

:: Proceed with installation? [Y/n] 
:: Retrieving packages...
 llhttp-9.2.1-2-x86_64                                                                     30,3 KiB   329 KiB/s 00:00 [----------------------------------------------------------------------] 100%
 libgit2-1:1.9.1-1-x86_64                                                                 974,3 KiB  1532 KiB/s 00:01 [----------------------------------------------------------------------] 100%
 bat-0.25.0-4-x86_64                                                                        2,3 MiB  2,66 MiB/s 00:01 [----------------------------------------------------------------------] 100%
 Total (3/3)                                                                                3,3 MiB  3,63 MiB/s 00:01 [----------------------------------------------------------------------] 100%
(3/3) checking keys in keyring                                                                                        [----------------------------------------------------------------------] 100%
(3/3) checking package integrity                                                                                      [----------------------------------------------------------------------] 100%
(3/3) loading package files                                                                                           [----------------------------------------------------------------------] 100%
(3/3) checking for file conflicts                                                                                     [----------------------------------------------------------------------] 100%
:: Processing package changes...
(1/3) installing llhttp                                                                                               [----------------------------------------------------------------------] 100%
(2/3) installing libgit2                                                                                              [----------------------------------------------------------------------] 100%
(3/3) installing bat                                                                                                  [----------------------------------------------------------------------] 100%
:: Running post-transaction hooks...
(1/1) Arming ConditionNeedsUpdate...
ðŸ“¦ Installing delta...
resolving dependencies...
looking for conflicting packages...

Package (1)      New Version  Net Change  Download Size

extra/git-delta  0.18.2-4      10,08 MiB       3,72 MiB

Total Download Size:    3,72 MiB
Total Installed Size:  10,08 MiB

:: Proceed with installation? [Y/n] 
:: Retrieving packages...
 git-delta-0.18.2-4-x86_64                                                                  3,7 MiB  3,88 MiB/s 00:01 [----------------------------------------------------------------------] 100%
(1/1) checking keys in keyring                                                                                        [----------------------------------------------------------------------] 100%
(1/1) checking package integrity                                                                                      [----------------------------------------------------------------------] 100%
(1/1) loading package files                                                                                           [----------------------------------------------------------------------] 100%
(1/1) checking for file conflicts                                                                                     [----------------------------------------------------------------------] 100%
:: Processing package changes...
(1/1) installing git-delta                                                                                            [----------------------------------------------------------------------] 100%
:: Running post-transaction hooks...
(1/1) Arming ConditionNeedsUpdate...
ðŸ“¦ Installing lazygit...
resolving dependencies...
looking for conflicting packages...

Package (1)    New Version  Net Change  Download Size

extra/lazygit  0.52.0-1      21,17 MiB       6,06 MiB

Total Download Size:    6,06 MiB
Total Installed Size:  21,17 MiB

:: Proceed with installation? [Y/n] 
:: Retrieving packages...
 lazygit-0.52.0-1-x86_64                                                                    6,1 MiB  4,03 MiB/s 00:02 [----------------------------------------------------------------------] 100%
(1/1) checking keys in keyring                                                                                        [----------------------------------------------------------------------] 100%
(1/1) checking package integrity                                                                                      [----------------------------------------------------------------------] 100%
(1/1) loading package files                                                                                           [----------------------------------------------------------------------] 100%
(1/1) checking for file conflicts                                                                                     [----------------------------------------------------------------------] 100%
:: Processing package changes...
(1/1) installing lazygit                                                                                              [----------------------------------------------------------------------] 100%
:: Running post-transaction hooks...
(1/1) Arming ConditionNeedsUpdate...
ðŸ“¦ Installing eza...
resolving dependencies...
looking for conflicting packages...

Package (1)  New Version  Net Change  Download Size

extra/eza    0.21.4-1       1,50 MiB       0,57 MiB

Total Download Size:   0,57 MiB
Total Installed Size:  1,50 MiB

:: Proceed with installation? [Y/n] 
:: Retrieving packages...
 eza-0.21.4-1-x86_64                                                                      586,0 KiB  1966 KiB/s 00:00 [----------------------------------------------------------------------] 100%
error: failed retrieving file 'eza-0.21.4-1-x86_64.pkg.tar.zst' from at.arch.mirror.kescher.at : The requested URL returned error: 404
(1/1) checking keys in keyring                                                                                        [----------------------------------------------------------------------] 100%
(1/1) checking package integrity                                                                                      [----------------------------------------------------------------------] 100%
(1/1) loading package files                                                                                           [----------------------------------------------------------------------] 100%
(1/1) checking for file conflicts                                                                                     [----------------------------------------------------------------------] 100%
:: Processing package changes...
(1/1) installing eza                                                                                                  [----------------------------------------------------------------------] 100%
:: Running post-transaction hooks...
(1/1) Arming ConditionNeedsUpdate...
ðŸ“¦ Installing gum...
resolving dependencies...
looking for conflicting packages...

Package (1)  New Version  Net Change  Download Size

extra/gum    0.16.1-1      13,30 MiB       3,65 MiB

Total Download Size:    3,65 MiB
Total Installed Size:  13,30 MiB

:: Proceed with installation? [Y/n] 
:: Retrieving packages...
 gum-0.16.1-1-x86_64                                                                        3,7 MiB  3,89 MiB/s 00:01 [----------------------------------------------------------------------] 100%
(1/1) checking keys in keyring                                                                                        [----------------------------------------------------------------------] 100%
(1/1) checking package integrity                                                                                      [----------------------------------------------------------------------] 100%
(1/1) loading package files                                                                                           [----------------------------------------------------------------------] 100%
(1/1) checking for file conflicts                                                                                     [----------------------------------------------------------------------] 100%
:: Processing package changes...
(1/1) installing gum                                                                                                  [----------------------------------------------------------------------] 100%
:: Running post-transaction hooks...
(1/1) Arming ConditionNeedsUpdate...
ðŸ“¦ Installing 1password-cli...
:: Resolving dependencies...
:: Calculating conflicts...
:: Calculating inner conflicts...

Aur (1)            Old Version  New Version    Make Only
aur/1password-cli               2.31.0-1       No

:: Proceed to review? [Y/n]: 

:: Downloading PKGBUILDs...
 (1/1) 1password-cli-2.31.0-1                        [--------------------------------------------------------------------------------------------------------------------------------------------]fetching devel info...
==> Making package: 1password-cli 2.31.0-1 (Sa 21 Jun 2025 19:16:44 CEST)
==> Retrieving sources...
  -> Downloading op_linux_amd64_v2.31.0.zip...
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 8907k  100 8907k    0     0  3654k      0  0:00:02  0:00:02 --:--:-- 3656k
==> Validating source_x86_64 files with sha256sums...
    op_linux_amd64_v2.31.0.zip ... Passed
==> Making package: 1password-cli 2.31.0-1 (Sa 21 Jun 2025 19:16:56 CEST)
==> Checking runtime dependencies...
==> Checking buildtime dependencies...
==> Retrieving sources...
  -> Found op_linux_amd64_v2.31.0.zip
==> Validating source_x86_64 files with sha256sums...
    op_linux_amd64_v2.31.0.zip ... Passed
==> Removing existing $srcdir/ directory...
==> Extracting sources...
  -> Extracting op_linux_amd64_v2.31.0.zip with bsdtar
==> Sources are ready.
1password-cli-2.31.0-1: parsing pkg list...
==> Making package: 1password-cli 2.31.0-1 (Sa 21 Jun 2025 19:17:15 CEST)
==> Checking runtime dependencies...
==> Checking buildtime dependencies...
==> WARNING: Using existing $srcdir/ tree
==> Starting check()...
gpg: assuming signed data in '/home/nbr/.cache/paru/clone/1password-cli/src/op'
gpg: Signature made Mi 07 Mai 2025 17:52:53 CEST
gpg:                using RSA key 3FEF9748469ADBE15DA7CA80AC2D62742012EA22
gpg: Good signature from "Code signing for 1Password <codesign@1password.com>" [unknown]
gpg: WARNING: This key is not certified with a trusted signature!
gpg:          There is no indication that the signature belongs to the owner.
Primary key fingerprint: 3FEF 9748 469A DBE1 5DA7  CA80 AC2D 6274 2012 EA22
==> Entering fakeroot environment...
==> Starting package()...
==> Tidying install...
  -> Removing empty directories...
  -> Removing libtool files...
  -> Purging unwanted files...
  -> Removing static library files...
  -> Compressing man and info pages...
==> Checking for packaging issues...
==> Creating package "1password-cli"...
  -> Generating .PKGINFO file...
  -> Generating .BUILDINFO file...
  -> Adding install file...
  -> Generating .MTREE file...
  -> Compressing package...
==> Leaving fakeroot environment.
==> Finished making: 1password-cli 2.31.0-1 (Sa 21 Jun 2025 19:17:26 CEST)
==> Cleaning up...
loading packages...
resolving dependencies...
looking for conflicting packages...

Package (1)    New Version  Net Change

1password-cli  2.31.0-1      23,53 MiB

Total Installed Size:  23,53 MiB

:: Proceed with installation? [Y/n] 
(1/1) checking keys in keyring                                                                                        [----------------------------------------------------------------------] 100%
(1/1) checking package integrity                                                                                      [----------------------------------------------------------------------] 100%
(1/1) loading package files                                                                                           [----------------------------------------------------------------------] 100%
(1/1) checking for file conflicts                                                                                     [----------------------------------------------------------------------] 100%
:: Processing package changes...
(1/1) installing 1password-cli                                                                                        [----------------------------------------------------------------------] 100%
:: Running post-transaction hooks...
(1/1) Arming ConditionNeedsUpdate...
âœ… All dependencies installed!

âš™ï¸  Phase 2: System Configuration

âš™ï¸  Configuring system settings...
ðŸš Setting zsh as default shell...
Changing shell for nbr.
Password: 
Shell changed.
âœ… Default shell changed to zsh (logout/login required)
âš ï¸  1Password SSH agent not found - Git signing will use system SSH
âœ… System configuration complete!

ðŸ”— Phase 3: Dotfiles Setup
â†’ Initializing submodules...
â†’ Updating all submodules...
Submodule 'common/.config/nvim' (git@github.com:nikbrunner/nbr.nvim.git) registered for path 'common/.config/nvim'
Submodule 'common/.config/wezterm' (git@github.com:nikbrunner/wezterm.git) registered for path 'common/.config/wezterm'
Cloning into '/home/nbr/repos/nikbrunner/dots/common/.config/nvim'...
Cloning into '/home/nbr/repos/nikbrunner/dots/common/.config/wezterm'...
Submodule path 'common/.config/nvim': checked out 'f4898ae3eff0be96ac847416d2281ec360c2a996'
Submodule path 'common/.config/wezterm': checked out '9162570ac35c1569679a392cf7f094182004a0b1'
Entering 'common/.config/nvim'
From github.com:nikbrunner/nbr.nvim
 * branch              main       -> FETCH_HEAD
Already up to date.
Entering 'common/.config/wezterm'
From github.com:nikbrunner/wezterm
 * branch            main       -> FETCH_HEAD
Already up to date.
âœ“ All submodules updated
â†’ Creating symlinks...
Setting up dotfiles symlinks...
OS detected: linux

â†’ Cleaning broken symlinks...
âœ“ No broken symlinks found

â†’ Processing common files...
[nbr@carbon dots]$ 
[nbr@carbon dots]$ dots link
bash: dots: command not found
[nbr@carbon dots]$
